{"ast":null,"code":"import _classCallCheck from \"/Users/aschulte/Desktop/mockups/auth-starter/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/aschulte/Desktop/mockups/auth-starter/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/aschulte/Desktop/mockups/auth-starter/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/aschulte/Desktop/mockups/auth-starter/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/aschulte/Desktop/mockups/auth-starter/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/aschulte/Desktop/mockups/auth-starter/src/components/Session/withAuthorization.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\n\nvar withAuthorization = function withAuthorization(condition) {\n  return function (Component) {\n    var WithAuthorization =\n    /*#__PURE__*/\n    function (_React$Component) {\n      _inherits(WithAuthorization, _React$Component);\n\n      function WithAuthorization() {\n        _classCallCheck(this, WithAuthorization);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(WithAuthorization).apply(this, arguments));\n      }\n\n      _createClass(WithAuthorization, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this = this;\n\n          this.listener = this.props.firebase.onAuthUserListener(function (authUser) {\n            if (!condition(authUser)) {\n              _this.props.history.push(ROUTES.SIGN_IN);\n            }\n          }, function () {\n            return _this.props.history.push(ROUTES.SIGN_IN);\n          });\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.listener();\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          return condition(this.props.authUser) ? React.createElement(Component, Object.assign({}, this.props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 28\n            },\n            __self: this\n          })) : null;\n        }\n      }]);\n\n      return WithAuthorization;\n    }(React.Component);\n\n    var mapStateToProps = function mapStateToProps(state) {\n      return {\n        authUser: state.sessionState.authUser\n      };\n    };\n\n    return compose(withRouter, withFirebase, connect(mapStateToProps))(WithAuthorization);\n  };\n};\n\nexport default withAuthorization;","map":{"version":3,"sources":["/Users/aschulte/Desktop/mockups/auth-starter/src/components/Session/withAuthorization.js"],"names":["React","withRouter","connect","compose","withFirebase","ROUTES","withAuthorization","condition","Component","WithAuthorization","listener","props","firebase","onAuthUserListener","authUser","history","push","SIGN_IN","mapStateToProps","state","sessionState"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,SAASC,YAAT,QAA6B,aAA7B;AACA,OAAO,KAAKC,MAAZ,MAAwB,wBAAxB;;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,SAAS;AAAA,SAAI,UAAAC,SAAS,EAAI;AAAA,QAC5CC,iBAD4C;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CAE5B;AAAA;;AAClB,eAAKC,QAAL,GAAgB,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,kBAApB,CACd,UAAAC,QAAQ,EAAI;AACV,gBAAI,CAACP,SAAS,CAACO,QAAD,CAAd,EAA0B;AACxB,cAAA,KAAI,CAACH,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwBX,MAAM,CAACY,OAA/B;AACD;AACF,WALa,EAMd;AAAA,mBAAM,KAAI,CAACN,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwBX,MAAM,CAACY,OAA/B,CAAN;AAAA,WANc,CAAhB;AAQD;AAX+C;AAAA;AAAA,+CAazB;AACrB,eAAKP,QAAL;AACD;AAf+C;AAAA;AAAA,iCAiBvC;AACP,iBAAOH,SAAS,CAAC,KAAKI,KAAL,CAAWG,QAAZ,CAAT,GACL,oBAAC,SAAD,oBAAe,KAAKH,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADK,GAEH,IAFJ;AAGD;AArB+C;;AAAA;AAAA,MAClBX,KAAK,CAACQ,SADY;;AAwBlD,QAAMU,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK;AAAA,aAAK;AAChCL,QAAAA,QAAQ,EAAEK,KAAK,CAACC,YAAN,CAAmBN;AADG,OAAL;AAAA,KAA7B;;AAIA,WAAOX,OAAO,CACZF,UADY,EAEZG,YAFY,EAGZF,OAAO,CAACgB,eAAD,CAHK,CAAP,CAILT,iBAJK,CAAP;AAKD,GAjCkC;AAAA,CAAnC;;AAmCA,eAAeH,iBAAf","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../Firebase';\nimport * as ROUTES from '../../constants/routes';\n\nconst withAuthorization = condition => Component => {\n  class WithAuthorization extends React.Component {\n    componentDidMount() {\n      this.listener = this.props.firebase.onAuthUserListener(\n        authUser => {\n          if (!condition(authUser)) {\n            this.props.history.push(ROUTES.SIGN_IN);\n          }\n        },\n        () => this.props.history.push(ROUTES.SIGN_IN),\n      );\n    }\n\n    componentWillUnmount() {\n      this.listener();\n    }\n\n    render() {\n      return condition(this.props.authUser) ? (\n        <Component {...this.props} />\n      ) : null;\n    }\n  }\n\n  const mapStateToProps = state => ({\n    authUser: state.sessionState.authUser,\n  });\n\n  return compose(\n    withRouter,\n    withFirebase,\n    connect(mapStateToProps),\n  )(WithAuthorization);\n};\n\nexport default withAuthorization;\n"]},"metadata":{},"sourceType":"module"}