{"ast":null,"code":"import _classCallCheck from \"/Users/aschulte/Desktop/mockups/react-redux-firebase-authentication/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/aschulte/Desktop/mockups/react-redux-firebase-authentication/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/aschulte/Desktop/mockups/react-redux-firebase-authentication/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/aschulte/Desktop/mockups/react-redux-firebase-authentication/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/aschulte/Desktop/mockups/react-redux-firebase-authentication/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/aschulte/Desktop/mockups/react-redux-firebase-authentication/src/components/Session/withAuthentication.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { withFirebase } from '../Firebase';\n\nvar withAuthentication = function withAuthentication(Component) {\n  var WithAuthentication =\n  /*#__PURE__*/\n  function (_React$Component) {\n    _inherits(WithAuthentication, _React$Component);\n\n    function WithAuthentication(props) {\n      var _this;\n\n      _classCallCheck(this, WithAuthentication);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(WithAuthentication).call(this, props));\n\n      _this.props.onSetAuthUser(JSON.parse(localStorage.getItem('authUser')));\n\n      return _this;\n    }\n\n    _createClass(WithAuthentication, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        this.listener = this.props.firebase.onAuthUserListener(function (authUser) {\n          localStorage.setItem('authUser', JSON.stringify(authUser));\n\n          _this2.props.onSetAuthUser(authUser);\n        }, function () {\n          localStorage.removeItem('authUser');\n\n          _this2.props.onSetAuthUser(null);\n        });\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.listener();\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return React.createElement(Component, Object.assign({}, this.props, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }));\n      }\n    }]);\n\n    return WithAuthentication;\n  }(React.Component);\n\n  var mapDispatchToProps = function mapDispatchToProps(dispatch) {\n    return {\n      onSetAuthUser: function onSetAuthUser(authUser) {\n        return dispatch({\n          type: 'AUTH_USER_SET',\n          authUser: authUser\n        });\n      }\n    };\n  };\n\n  return compose(withFirebase, connect(null, mapDispatchToProps))(WithAuthentication);\n};\n\nexport default withAuthentication;","map":{"version":3,"sources":["/Users/aschulte/Desktop/mockups/react-redux-firebase-authentication/src/components/Session/withAuthentication.js"],"names":["React","connect","compose","withFirebase","withAuthentication","Component","WithAuthentication","props","onSetAuthUser","JSON","parse","localStorage","getItem","listener","firebase","onAuthUserListener","authUser","setItem","stringify","removeItem","mapDispatchToProps","dispatch","type"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,SAASC,YAAT,QAA6B,aAA7B;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,SAAS,EAAI;AAAA,MAChCC,kBADgC;AAAA;AAAA;AAAA;;AAEpC,gCAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8FAAMA,KAAN;;AAEA,YAAKA,KAAL,CAAWC,aAAX,CACEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CADF;;AAHiB;AAMlB;;AARmC;AAAA;AAAA,0CAUhB;AAAA;;AAClB,aAAKC,QAAL,GAAgB,KAAKN,KAAL,CAAWO,QAAX,CAAoBC,kBAApB,CACd,UAAAC,QAAQ,EAAI;AACVL,UAAAA,YAAY,CAACM,OAAb,CAAqB,UAArB,EAAiCR,IAAI,CAACS,SAAL,CAAeF,QAAf,CAAjC;;AACA,UAAA,MAAI,CAACT,KAAL,CAAWC,aAAX,CAAyBQ,QAAzB;AACD,SAJa,EAKd,YAAM;AACJL,UAAAA,YAAY,CAACQ,UAAb,CAAwB,UAAxB;;AACA,UAAA,MAAI,CAACZ,KAAL,CAAWC,aAAX,CAAyB,IAAzB;AACD,SARa,CAAhB;AAUD;AArBmC;AAAA;AAAA,6CAuBb;AACrB,aAAKK,QAAL;AACD;AAzBmC;AAAA;AAAA,+BA2B3B;AACP,eAAO,oBAAC,SAAD,oBAAe,KAAKN,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;AACD;AA7BmC;;AAAA;AAAA,IACLP,KAAK,CAACK,SADD;;AAgCtC,MAAMe,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ;AAAA,WAAK;AACtCb,MAAAA,aAAa,EAAE,uBAAAQ,QAAQ;AAAA,eACrBK,QAAQ,CAAC;AAAEC,UAAAA,IAAI,EAAE,eAAR;AAAyBN,UAAAA,QAAQ,EAARA;AAAzB,SAAD,CADa;AAAA;AADe,KAAL;AAAA,GAAnC;;AAKA,SAAOd,OAAO,CACZC,YADY,EAEZF,OAAO,CACL,IADK,EAELmB,kBAFK,CAFK,CAAP,CAMLd,kBANK,CAAP;AAOD,CA5CD;;AA8CA,eAAeF,kBAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\n\nimport { withFirebase } from '../Firebase';\n\nconst withAuthentication = Component => {\n  class WithAuthentication extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.props.onSetAuthUser(\n        JSON.parse(localStorage.getItem('authUser')),\n      );\n    }\n\n    componentDidMount() {\n      this.listener = this.props.firebase.onAuthUserListener(\n        authUser => {\n          localStorage.setItem('authUser', JSON.stringify(authUser));\n          this.props.onSetAuthUser(authUser);\n        },\n        () => {\n          localStorage.removeItem('authUser');\n          this.props.onSetAuthUser(null);\n        },\n      );\n    }\n\n    componentWillUnmount() {\n      this.listener();\n    }\n\n    render() {\n      return <Component {...this.props} />;\n    }\n  }\n\n  const mapDispatchToProps = dispatch => ({\n    onSetAuthUser: authUser =>\n      dispatch({ type: 'AUTH_USER_SET', authUser }),\n  });\n\n  return compose(\n    withFirebase,\n    connect(\n      null,\n      mapDispatchToProps,\n    ),\n  )(WithAuthentication);\n};\n\nexport default withAuthentication;\n"]},"metadata":{},"sourceType":"module"}